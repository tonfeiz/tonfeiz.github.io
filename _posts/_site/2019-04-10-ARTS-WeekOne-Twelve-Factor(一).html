<p>Twelve-Factor指的是构建Saas的应用程序应当满足的12个特性。这些应用程序具备的特点包括：</p>
<ul>
  <li>使用声明式方法(declarative formats)来自动化设置，以此最小化新的成员加入工程的时间和花费</li>
  <li>与底层的操作系统之间有明确的协议，以此最大化不同执行环境之间的可移植性</li>
  <li>适合于部署在现代云平台上，避免了服务器和系统管理员的需要</li>
  <li>最小化开发环境(development)和生产环境(production)之间的分歧，为了最大化灵活性使用持续部署</li>
  <li>能够在不显著改变工具、架构或者开发实践的基础上自由扩展</li>
</ul>

<p>上面有一些名词是我暂时还不太理解的，这里做个简单的解释。</p>
<ul>
  <li>声明式方法：倾向于直接告诉计算机做什么，而不是告诉计算机怎么做的方法。具体可见<a href="https://en.wikipedia.org/wiki/Declarative_programming">declarative programming</a></li>
  <li>持续部署：和持续部署相关的概念还有持续集成和持续交付。持续集成强调开发人员提交了新代码之后，立刻进行构建、（单元）测试。根据测试结果，我们可以确定新代码和原有代码能否正确地集成在一起。持续交付在持续集成的基础上，将集成后的代码部署到更贴近真实运行环境的「类生产环境」（production-like environments）中。比如，我们完成单元测试后，可以把代码部署到连接数据库的 Staging 环境中更多的测试。如果代码没有问题，可以继续手动部署到生产环境中。持续部署则是在持续交付的基础上，把部署到生产环境的过程自动化。(引自知乎yumminhuang)</li>
  <li>生产环境、开发环境：软件应用开发的几个环境包括：开发环境(development)，集成环境(integration)、测试环境(testing)、QA验证、模拟环境(staging)、生产环境(production)</li>
</ul>

<p>本是打算一次性把这12个特性都叙述一遍，但发现其中涉及到许多自己不知道的东西，因此决定还是分批来，本周先仔细看3个特性。</p>

<h2 id="一基准代码codebase">一、基准代码(codebase)</h2>
<p>这一特性用一句话说就是，只有一个用版本控制系统跟踪的代码库，但可以有许多部署(deploy)</p>

<p>在中心化的版本管理系统中，一个<em>codebase</em>就是单个的代码库。在去中心化的版本管理系统中，一个<em>codebase</em>就是共享一个根提交(root commit)的代码库</p>

<p>需要注意的是，在<em>codebase</em>和app之间永远是一对一的关系，如果有多个<em>codebase</em>，那就不是一个app，而是一个分布式系统，其中的每个组件都应当是一个满足twelve-factor的app。</p>

<p>然而，一个app可以有多个部署。例如在生产环境中的部署，在每个开发环境上的部署等。</p>

<p>不同部署的<em>codebase</em>是相同的，但是每个活跃的部署可以是不同的版本。</p>

<h2 id="二依赖">二、依赖</h2>
<p>这一特性用一句话说就是，显示的声明依赖并隔离它们</p>

<p>这一章读的还不太懂，可能是自身还缺乏关于微服务方面的知识的原因。</p>

<p>一个满足这一特性的app绝不会依赖于隐式的系统级别的库。它会使用依赖清单来显式声明自己所依赖的所有依赖项，并且会在执行期间使用依赖隔离工具来防止外界系统的隐式依赖泄漏<strong>进来</strong>(leak in)。对Ruby来说，依赖清单就是<code class="highlighter-rouge">Gemfile</code>，依赖隔离工具就是<code class="highlighter-rouge">bundle exec</code>。对Python来说，依赖清单就是<code class="highlighter-rouge">pip</code>，依赖隔离工具就是<code class="highlighter-rouge">virtualenv</code>。</p>

<p>这么做的一个优势就是对于新来的开发者来说，他只需要安装语言运行时环境以及依赖管理工具就可以进行app的开发。</p>

<p>twelve-factor app也不会隐式的依赖任何系统工具，即便这些工具在大部分操作系统上都存在，例如<code class="highlighter-rouge">curl</code>。</p>

<h2 id="三配置">三、配置</h2>
<p>将配置存在环境中</p>

<p>一个app的配置是在不同的部署中不同的东西。有些app将这些配置直接硬编码到代码中，这是违反twelve-factor的。配置应该从代码中严格的分离开来。当然对于内在的配置，即在不同部署中相同的配置，可以直接硬编码。</p>

<p>一种配置方法是使用配置文件。配置文件不应当被放入版本控制系统中，但这一点容易被忽略，而且大多配置文件往往基于特定的语言或是框架。</p>

<p>twelve-factor app将配置存在环境变量中。注意，使用组合的环境变量会使app失去可扩展性(组合的环境变量存疑)，最好还是将每个环境变量单独使用。</p>
